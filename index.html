<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸŒ ÎŸÎ¹ Î¤Î±Î¾Î¹Î´Î¹Ï‰Ï„Î¹ÎºÎ¿Î¯ ÎœÎ±Ï‚ Î£Ï„ÏŒÏ‡Î¿Î¹</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg1:#e3f2fd; --bg2:#fce4ec; --text:#222; --accent:#6c63ff;
      --v1a:#8ec5fc; --v1b:#e0c3fc;
      --v2a:#f6d365; --v2b:#fda085;
      --v3a:#a1c4fd; --v3b:#c2e9fb;
      --v4a:#f093fb; --v4b:#f5576c;
      --v5a:#84fab0; --v5b:#8fd3f4;
      --success:#4caf50; --surface: rgba(255,255,255,0.85);
      --card-surface:#fff; --radius:18px; --t:.35s ease;
    }
    [data-theme="candy"] { --bg1:#e3f2fd; --bg2:#fce4ec; --accent:#6c63ff; }
    [data-theme="ocean"] { --bg1:#e0f7fa; --bg2:#e3f2fd; --accent:#0277bd; --text:#0f1b2d; }
    [data-theme="sunset"] { --bg1:#fff1eb; --bg2:#ace0f9; --accent:#ff6f61; --text:#2b1d1d; }
    [data-theme="forest"] { --bg1:#e8f5e9; --bg2:#e3f2fd; --accent:#2e7d32; --text:#102114; }
    [data-theme="mono"] { --bg1:#f3f4f6; --bg2:#e5e7eb; --accent:#111827; --text:#111827; --card-surface:#f9fafb; }

    body {
      margin:0; min-height:100vh; font-family:'Inter',sans-serif;
      color:var(--text);
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      background-size:200% 200%;
      animation:bgshift 18s ease-in-out infinite;
      display:flex; flex-direction:column; align-items:center;
      padding:40px 15px 96px; overflow-x:hidden; transition: color .4s ease;
    }
    @keyframes bgshift { 0%,100%{background-position:0 0} 50%{background-position:100% 100%} }
    body.dark { filter:saturate(.95); }

    h1 { font-family:'Playfair Display',serif; font-size:2.4rem; margin:0 0 20px; color:var(--accent); text-align:center; }

    .toolbar { display:flex; gap:10px; flex-wrap:wrap; margin-bottom:22px; justify-content:center; }
    .toolbar select, .toolbar button {
      border:none; border-radius:12px; padding:8px 12px; background:var(--surface); color:var(--text);
      box-shadow:0 2px 6px rgba(0,0,0,.08); font:600 .9rem/1 'Inter',sans-serif;
      cursor:pointer; transition: transform .25s ease, background .25s ease; backdrop-filter: blur(6px);
    }
    .toolbar select:hover, .toolbar button:hover { transform: translateY(-2px); }

    .grid { width:100%; max-width:1200px; display:grid; gap:18px; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); }

    .card {
      position:relative; height:290px; border-radius:var(--radius); overflow:hidden; cursor:pointer;
      perspective:1000px; opacity:0; transform: translateY(14px) scale(.98);
      animation:cardIn .6s forwards;
      box-shadow:0 6px 18px rgba(0,0,0,.08);
      transition: transform .55s cubic-bezier(.17,.67,.83,.67), box-shadow .4s ease;
      background: var(--card-surface);
    }
    @keyframes cardIn { to{opacity:1; transform:translateY(0) scale(1)} }
    .card:hover { transform: translateY(-6px) scale(1.02); box-shadow:0 12px 28px rgba(0,0,0,.12); }

    /* Japan sakura overlay moved to the CARD (behind content) */
    .card.japan::before{
      content:""; position:absolute; inset:0; z-index:0; pointer-events:none;
      background-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><text y="20" font-size="20">ğŸŒ¸</text></svg>');
      background-size:40px 40px; background-repeat:repeat;
      opacity:0; transform: translateY(-20px);
      animation:petals 12s linear infinite;
      transition: opacity 1.2s ease, transform 1s ease;
    }
    .card.japan:hover::before, .card.japan.flipped::before { opacity:.45; transform: translateY(0); }
    @keyframes petals { from{ background-position-y:0 } to{ background-position-y:600px } }

    .card-content { position:relative; z-index:1; width:100%; height:100%; transform-style:preserve-3d; transition: transform .85s cubic-bezier(.4,.2,.2,1); }
    .card.flipped .card-content { transform: rotateY(180deg); }

    .front, .back {
      position:absolute; inset:0; border-radius:var(--radius);
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      padding:18px; backface-visibility:hidden; box-sizing:border-box;
    }
    .front { color:#fff; text-align:center; font-weight:600; }
    .front h3 { margin:0; font-size:1.4rem; display:flex; gap:.35em; align-items:center; justify-content:center; }
    .variant-1 .front { background: linear-gradient(135deg,var(--v1a),var(--v1b)); }
    .variant-2 .front { background: linear-gradient(135deg,var(--v2a),var(--v2b)); }
    .variant-3 .front { background: linear-gradient(135deg,var(--v3a),var(--v3b)); }
    .variant-4 .front { background: linear-gradient(135deg,var(--v4a),var(--v4b)); }
    .variant-5 .front { background: linear-gradient(135deg,var(--v5a),var(--v5b)); }
    .card.japan .front { background: linear-gradient(135deg, #ffb3c1, #ffe0e9); color:#fff; }

    .front::after {
      content:""; position:absolute; inset:-40%;
      background: radial-gradient( circle at 30% 0%, rgba(255,255,255,.25), transparent 40% );
      transform: translateX(-60%) rotate(15deg);
      transition: transform .8s ease, opacity .8s ease; opacity:0;
    }
    .card:hover .front::after { transform: translateX(15%) rotate(15deg); opacity:.9; }

    .back { background: var(--card-surface); color:var(--text); transform: rotateY(180deg); text-align:center; }
    .back img { width:100%; height:150px; object-fit:cover; border-radius:12px; border:1px solid rgba(0,0,0,.06); margin-bottom:10px; }
    .back p { margin:0 0 10px; font-size:.95rem; }

    .checkmark { position:absolute; top:10px; right:10px; font-size:1.35rem; color:var(--success); opacity:0; transition:opacity .3s ease; filter: drop-shadow(0 1px 2px rgba(0,0,0,.2)); }
    .card.checked .checkmark { opacity:1; }

    .chips { position:absolute; left:10px; top:10px; display:flex; gap:6px; }
    .chip { font-size:.72rem; font-weight:700; letter-spacing:.02em; padding:4px 8px; border-radius:999px; background:rgba(255,255,255,.25); color:#fff; backdrop-filter: blur(4px); box-shadow:0 1px 2px rgba(0,0,0,.12); }

    .progress { position:fixed; left:0; right:0; bottom:0; height:8px; background:rgba(0,0,0,.08); }
    .progress .fill { height:100%; width:0%; background:var(--accent); transition:width .4s ease; }
    .progress-text { position:fixed; bottom:14px; left:50%; transform:translateX(-50%); background:var(--surface); padding:4px 10px; border-radius:10px; font-size:.9rem; box-shadow:0 2px 6px rgba(0,0,0,.08); backdrop-filter: blur(6px); }

    body.dark .toolbar select, body.dark .toolbar button { background: rgba(0,0,0,.25); color:#fff; }
    body.dark .back { background: rgba(20,22,30,.85); color:#f1f1f1; }
    body.dark .progress-text { background: rgba(0,0,0,.35); color:#eee; }

    @media (max-width: 620px){ .card{ height:270px; } .front h3{ font-size:1.25rem; } }
  </style>
</head>
<body data-theme="candy">
  <h1>ÎŸÎ¹ Î¤Î±Î¾Î¹Î´Î¹Ï‰Ï„Î¹ÎºÎ¿Î¯ ÎœÎ±Ï‚ Î£Ï„ÏŒÏ‡Î¿Î¹</h1>

  <div class="toolbar">
    <select id="theme">
      <option value="candy">ğŸ¨ Candy</option><option value="ocean">ğŸŒŠ Ocean</option>
      <option value="sunset">ğŸŒ… Sunset</option><option value="forest">ğŸŒ² Forest</option>
      <option value="mono">âš« Mono</option>
    </select>
    <select id="filter">
      <option value="all">ÎŒÎ»Î¿Î¹</option><option value="visited">Î•Ï€Î¹ÏƒÎºÎ­Ï†Ï„Î·ÎºÎ±</option><option value="notVisited">Î”ÎµÎ½ Î­Ï‡Ï‰ Ï€Î¬ÎµÎ¹</option>
    </select>
    <button id="darkToggle">ğŸŒ™ Dark Mode</button>
  </div>

  <div class="grid" id="grid"></div>

  <div class="progress"><div class="fill"></div></div>
  <div class="progress-text" id="ptext">0% ÎŸÎ»Î¿ÎºÎ»Î·ÏÏÎ¸Î·ÎºÎµ</div>

  <script>
    const destinations = [
      { name: "ğŸ‡¬ğŸ‡· ÎœÎµÏ„Î­Ï‰ÏÎ±", image:"./meteora.jpg", description:"Î¤Î± ÎœÎ±Î³ÎµÏ…Ï„Î¹ÎºÎ¬ ÎœÎµÏ„Î­Ï‰ÏÎ± Ï„Î·Ï‚ Î•Î»Î»Î¬Î´Î±Ï‚", region:"Î•Î»Î»Î¬Î´Î±" },
      { name: "ğŸ‡ªğŸ‡¸ Î’Î±ÏÎºÎµÎ»ÏÎ½Î·", image:"./barcelona.jpg", description:"Î’Î±ÏÎºÎµÎ»ÏÎ½Î·, Î™ÏƒÏ€Î±Î½Î¯Î±", region:"Î•Ï…ÏÏÏ€Î·" },
      { name: "ğŸ‡«ğŸ‡· Î Î±ÏÎ¯ÏƒÎ¹", image:"./paris.jpg", description:"Î Î±ÏÎ¯ÏƒÎ¹, Î“Î±Î»Î»Î¯Î±", region:"Î•Ï…ÏÏÏ€Î·" },
      { name: "ğŸ‡³ğŸ‡± Î†Î¼ÏƒÏ„ÎµÏÎ½Ï„Î±Î¼", image:"./amsterdam.jpg", description:"Î†Î¼ÏƒÏ„ÎµÏÎ½Ï„Î±Î¼, ÎŸÎ»Î»Î±Î½Î´Î¯Î±", region:"Î•Ï…ÏÏÏ€Î·" },
      { name: "ğŸ‡®ğŸ‡¹ ÎœÎ¹Î»Î¬Î½Î¿", image:"./milan.jpg", description:"ÎœÎ¹Î»Î¬Î½Î¿, Î™Ï„Î±Î»Î¯Î±", region:"Î•Ï…ÏÏÏ€Î·" },
      { name: "ğŸ‡®ğŸ‡¹ Î’ÎµÎ½ÎµÏ„Î¯Î±", image:"./venice.jpg", description:"Î’ÎµÎ½ÎµÏ„Î¯Î±, Î™Ï„Î±Î»Î¯Î±", region:"Î•Ï…ÏÏÏ€Î·" },
      { name: "ğŸ‡¦ğŸ‡¹ Î’Î¹Î­Î½Î½Î·", image:"./vienna.jpg", description:"Î’Î¹Î­Î½Î½Î·, Î‘Ï…ÏƒÏ„ÏÎ¯Î±", region:"Î•Ï…ÏÏÏ€Î·" },
      { name: "ğŸ‡­ğŸ‡º Î’Î¿Ï…Î´Î±Ï€Î­ÏƒÏ„Î·", image:"./budapest.jpg", description:"Î’Î¿Ï…Î´Î±Ï€Î­ÏƒÏ„Î·, ÎŸÏ…Î³Î³Î±ÏÎ¯Î±", region:"Î•Ï…ÏÏÏ€Î·" },
      { name: "ğŸ‡¸ğŸ‡ª Î£Î¿Ï…Î·Î´Î¯Î±", image:"./sweden.jpg", description:"Î£Î¿Ï…Î·Î´Î¯Î±", region:"Î•Ï…ÏÏÏ€Î·" },
      { name: "ğŸ‡¨ğŸ‡­ Î•Î»Î²ÎµÏ„Î¯Î±", image:"./switzerland.jpg", description:"Î•Î»Î²ÎµÏ„Î¯Î±", region:"Î•Ï…ÏÏÏ€Î·" },
      { name: "ğŸ‡«ğŸ‡® Î¦Î¹Î½Î»Î±Î½Î´Î¯Î±", image:"./finland.jpg", description:"Î¦Î¹Î½Î»Î±Î½Î´Î¯Î±", region:"Î•Ï…ÏÏÏ€Î·" },
      { name: "ğŸ‡³ğŸ‡´ ÎÎ¿ÏÎ²Î·Î³Î¯Î±", image:"./norway.jpg", description:"ÎÎ¿ÏÎ²Î·Î³Î¯Î±", region:"Î•Ï…ÏÏÏ€Î·" },
      { name: "ğŸ‡®ğŸ‡¸ Î™ÏƒÎ»Î±Î½Î´Î¯Î±", image:"./iceland.jpg", description:"Î™ÏƒÎ»Î±Î½Î´Î¯Î±", region:"Î•Ï…ÏÏÏ€Î·" },
      { name: "ğŸ‡µğŸ‡¹ Î Î¿ÏÏ„Î¿Î³Î±Î»Î¯Î±", image:"./portugal.jpg", description:"Î Î¿ÏÏ„Î¿Î³Î±Î»Î¯Î±", region:"Î•Ï…ÏÏÏ€Î·" },
      { name: "ğŸ‡¦ğŸ‡ª ÎÏ„Î¿Ï…Î¼Ï€Î¬Î¹", image:"./dubai.jpg", description:"ÎÏ„Î¿Ï…Î¼Ï€Î¬Î¹, Î—Î‘Î•", region:"ÎœÎ­ÏƒÎ· Î‘Î½Î±Ï„Î¿Î»Î®" },
      { name: "ğŸ‡²ğŸ‡» ÎœÎ±Î»Î´Î¯Î²ÎµÏ‚", image:"./maldives.jpg", description:"ÎœÎ±Î»Î´Î¯Î²ÎµÏ‚", region:"Î‘ÏƒÎ¯Î±" },
      { name: "ğŸ‡ªğŸ‡¬ Î‘Î¯Î³Ï…Ï€Ï„Î¿Ï‚", image:"./egypt.jpg", description:"Î‘Î¯Î³Ï…Ï€Ï„Î¿Ï‚", region:"Î‘Ï†ÏÎ¹ÎºÎ®" },
      { name: "ğŸ‡¯ğŸ‡µ Î™Î±Ï€Ï‰Î½Î¯Î±", image:"./japan.jpg", description:"ğŸŒ¸ Î™Î±Ï€Ï‰Î½Î¹ÎºÎ® ÎœÎ±Î³ÎµÎ¯Î± ğŸŒ¸", region:"Î‘ÏƒÎ¯Î±", special:true }
    ];

    const grid = document.getElementById('grid');
    const filterSel = document.getElementById('filter');
    const themeSel = document.getElementById('theme');
    const darkToggle = document.getElementById('darkToggle');
    const ptext = document.getElementById('ptext');

    let checked = JSON.parse(localStorage.getItem('checkedItems')||'[]');

    // theme + dark restore
    const savedTheme = localStorage.getItem('theme') || 'candy';
    document.body.setAttribute('data-theme', savedTheme);
    themeSel.value = savedTheme;
    if(localStorage.getItem('darkMode')==='true'){
      document.body.classList.add('dark'); darkToggle.textContent='â˜€ï¸ Light Mode';
    }

    // Build once (no re-render flash)
    function build(){
      grid.innerHTML='';
      destinations.forEach((d, idx)=>{
        const variant = (idx % 5) + 1;
        const card = document.createElement('div');
        card.className = `card variant-${variant} ${d.special?'japan':''} ${checked.includes(idx)?'checked':''}`;
        card.dataset.index = idx;

        card.innerHTML = `
          <div class="card-content">
            <div class="front">
              <div class="chips"><span class="chip">${d.region||'â€”'}</span></div>
              <div class="checkmark">âœ…</div>
              <h3>${d.name}${d.special?' â›©ï¸':''}</h3>
            </div>
            <div class="back">
              <img src="${d.image}" alt="${d.description}" onerror="this.src='https://via.placeholder.com/600x350?text=No+Image'">
              <p>${d.description}</p>
              <label style="display:inline-flex;gap:.45em;align-items:center;">
                <input type="checkbox" ${checked.includes(idx)?'checked':''}> Î•Ï€Î¹ÏƒÎºÎ­Ï†Ï„Î·ÎºÎ±
              </label>
            </div>
          </div>
        `;

        // Prevent flip when clicking the checkbox; update state only (no rebuild)
        const checkbox = card.querySelector('input');
        checkbox.addEventListener('click', e => e.stopPropagation());
        checkbox.addEventListener('change', e=>{
          const isChecked = e.target.checked;
          if(isChecked) checked = [...new Set([...checked, idx])];
          else checked = checked.filter(i=>i!==idx);
          localStorage.setItem('checkedItems', JSON.stringify(checked));
          card.classList.toggle('checked', isChecked);
          updateProgress();
          applyFilterToCard(card); // update visibility under current filter, no full refresh
        });

        // Flip only when clicking outside inputs
        card.addEventListener('click', e=>{
          if(e.target.tagName.toLowerCase()==='input') return;
          card.classList.toggle('flipped');
        });

        grid.appendChild(card);
      });

      applyFilterAll();
      updateProgress();
    }

    function applyFilterToCard(card){
      const idx = Number(card.dataset.index);
      const visited = checked.includes(idx);
      const f = filterSel.value;
      const show = (f==='all') || (f==='visited' && visited) || (f==='notVisited' && !visited);
      card.style.display = show ? '' : 'none';
    }

    function applyFilterAll(){
      const f = filterSel.value;
      [...grid.children].forEach(card => applyFilterToCard(card));
    }

    function updateProgress(){
      const fill = document.querySelector('.progress .fill');
      const pct = (checked.length / destinations.length)*100;
      fill.style.width = `${pct}%`;
      ptext.textContent = `${Math.round(pct)}% ÎŸÎ»Î¿ÎºÎ»Î·ÏÏÎ¸Î·ÎºÎµ ${pct===100 ? 'ğŸ‰' : ''}`;
    }

    // Controls
    themeSel.addEventListener('change', ()=>{
      document.body.setAttribute('data-theme', themeSel.value);
      localStorage.setItem('theme', themeSel.value);
    });

    darkToggle.addEventListener('click', ()=>{
      document.body.classList.toggle('dark');
      const isDark = document.body.classList.contains('dark');
      darkToggle.textContent = isDark ? 'â˜€ï¸ Light Mode' : 'ğŸŒ™ Dark Mode';
      localStorage.setItem('darkMode', isDark);
    });

    filterSel.addEventListener('change', applyFilterAll);

    build();
  </script>
</body>
</html>
